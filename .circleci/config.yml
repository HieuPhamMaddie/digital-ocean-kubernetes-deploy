version: 2.1
orbs:
  k8s: digitalocean/k8s@0.1.1
  doctl: digitalocean/cli@0.1.1
jobs:
  build:
    docker:
      - image: cimg/base:2023.09
    steps:
      - checkout
      - setup_remote_docker
      - doctl/install
      - run:
          name: Authenticate with DigitalOcean
          command: |
            doctl auth init -t $DIGITALOCEAN_ACCESS_TOKEN
      - k8s/install
      - run:
          name: Save Kubernetes Config
          command: |
            doctl kubernetes cluster kubeconfig save do-k8s-practice
      - run:
          name: Your Kubernetes Commands
          command: |
            kubectl get pods
            # Add more Kubernetes commands as needed

workflows:
  version: 2
  build-and-deploy:
    jobs:
      - build
